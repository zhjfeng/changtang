萧内网征婚大数据
哈哈，抱歉用了大数据这样一个高大上的标题，实在是环境所迫啊。
毕竟现在要是张嘴还不能蹦出几个云，大数据，AI，数据孪生，网络切片，边缘计算，窄带物联网等等这些，实在是显得自己多少有点文盲。其实这只是一个小小的爬虫脚本。
事情得从过年放假说起。
原以为过年回家可以有好多亲相，毕竟老妈之前电话里已经承诺了好几次了。结果一直到了年初三，还没有任何要带我出去相亲的意思，我又不太好去问，毕竟要脸，直接问的话就显得我太不矜持了。
终于年初三晚上，那晚正在和大神在刺激战场里厮杀，老爸钻进了我的被窝，和我促膝长谈，先聊了工作，股票，然后终于聊到了我的个人问题了，实在顾不得大神了，放下了手机，兴奋地搓起了小手手，喇叭里还在传出大神“扶我扶我”的惨叫。我还在想该怎么组织语言委婉而不失礼貌地婉拒下，来显示我的矜持，老爸却说了一句“个人问题还得个人自己解决啊”，心情瞬间从云间跌到了谷底，重新拿起了手机，脚边怎么有个盒子，擦，还有八倍镜.......
回杭后，也就忘了这回事，昨天突然灵光一闪想到了张老师之前说的大名鼎鼎的萧内网，我竟然没想到，感觉错过一个亿，毕竟要是碰上个眼瞎的拆迁户，岂不是能少奋斗100年，还炒啥股，搬啥砖啊~~
立马注册了萧内网，原来有么多单身男女，再一次兴奋地搓起了小手手。额，好像上面的信息太多了，又没个筛选项，虽然很接地气，但是要一个个打开看的话，效率实在是不高，毕竟像我这种分分钟几千上下的人来说，时间就是金钱啊。要是能把上面的个人信息全摘下来，自己先筛一遍就很完美了，说干就干。
看了下萧内网web端是PHP写的，还是从移动端入手吧。
移动端性别筛选是原生控制的，H5无法筛选，只能男女一起抓了，扎心。先不管了，进入征婚版块，抓到列表请求，可以看到一页有40条征婚信息，返回里面的tid就是帖子的ID，url组装后可以进入对应的帖子，如：https://share.zaixs.com/wap/thread/view-thread/tid/661384就可以抓取对应的信息了。下面放上












做完发现还相啥亲啊，开个婚介所当月老吧~~~

来说下这50行不到的脚本中遇到的问题吧
1、直接请求地址，报403，这个是网站做了防爬，需要在headers里加上User-Agent
2、看请求本能地以为参数直接是用from-date传的，后来发现切换页数请求出来的消息都是第一页的，排查后发现page实际是用x-www-form-urlencoded传的，
3、写完脚本，爬了几个请求，OK后，正式开始爬取信息，报了list index out of range，字面理解以为数据太多，列表越界了，还特意卸载了py2，装了64的py3，依旧这个报错，然后把列表切成20个一组去跑，第一组跑成功了，第二组又报错了，这下可以确认是某条数据导致的问题的了，最后定位到是因为某个帖子没用网站定义的模板上传个人资料，导致无法定位到元素，健壮性不够啊，在取资料的for循环下加了try去忽略报错，问题解决。
4、问题还有很多，没有做代理，没有写延时，请求多了，可能被封IP。爬取时间也过长，200条信息爬了接近80s，不过暂时应该还够用。




